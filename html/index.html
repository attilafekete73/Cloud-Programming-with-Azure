<!DOCTYPE html>
<html>
  <head><title>Cloud Programming</title></head>
  <body>
    <h1>Hello World!</h1>
    <button onclick="measureSelfLatency()">Check Latency</button>
    <p id="result">Click the button to check latency to this page.</p>

    <script>
      async function measureSelfLatency() {
        const endpoint = window.location.href;
        const start = performance.now();

        try {
          await fetch(endpoint, { method: 'HEAD', cache: 'no-store' });
          const end = performance.now();
          const latency = end - start;
          document.getElementById("result").textContent = `Latency to this site: ${latency.toFixed(2)} ms`;
        } catch (err) {
          document.getElementById("result").textContent = `Error checking latency: ${err}`;
        }
      }
    </script>


  </body>
</html>